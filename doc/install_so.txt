1、部署security系统（参见word文档）
2、配置/修改ip地址
3、修改mysql配置

su root
vi /etc/mysql/my.cnf

在下面 括号内容内添加条件设定

[client]
default-character-set=utf8
[mysql]
default-character-set=utf8
[mysqld]
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8

/etc/init.d/mysql restart

4、初始化程序，点击桌面上的setup图标，一步一步根据需求来设置所要初始化的配置

service nsm status 查看各种服务状态
service nsm start/stop/restart

5、关闭ufw
 
    关闭：sudo ufw disable  
    状态：sudo ufw status  

vi /etc/ufw/ufw.conf
  
 ENABLED= no
 
重启系统使之生效

6、导入数据

登陆mysql

mysql -uroot -p

use securityonion_db;


运行如下建表语句

CREATE TABLE `sid_cae` (
  `序号` varchar(255) DEFAULT NULL,
  `sid` varchar(255) DEFAULT NULL,
  `signature` varchar(255) DEFAULT NULL,
  `Chinese` varchar(255) DEFAULT NULL,
  KEY `index_name` (`sid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

导入表sid_cae

source  路径/sid_cae.sql;



运行如下语句

UPDATE 

update status set long_desc='实时事件' where status_id='0';

update status set long_desc='无需操作' where status_id='1';

update status set long_desc='事件升级' where status_id='2';

update status set long_desc='非授权特权访问（root）' where status_id='11';

update status set long_desc='非授权普通访问（user）' where status_id='12';

update status set long_desc='非授权访问' where status_id='13';

update status set long_desc='成功的DoS攻击' where status_id='14';

update status set long_desc='违反安全策略' where status_id='15';

update status set long_desc='扫描行为' where status_id='16';

update status set long_desc='恶意程序感染' where status_id='17';



7、部署java环境

上传jdk包


mkdir -p /usr/lib/jvm
mv jdk-8u151-linux-x64.tar.gz /usr/lib/jvm
cd /usr/lib/jvm
tar xzvf jdk-8u151-linux-x64.tar.gz

记得将解压后的jdk目录名称改为 jdk1.8.0

vi /etc/profile

export JAVA_HOME=/usr/lib/jvm/jdk1.8.0  
export CLASSPATH=.:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$CLASSPATH  
export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH

source /etc/profile


验证是否安装成功

java -version
如无报错则安装成功

8、部署tomcat

上传tomcat包

复制解压后的文件到 /opt 目录
sudo cp -r apache-tomcat-8.0.12 /opt
cd /opt/apache-tomcat-8.0.12
sudo mv apache-tomcat-8 tomcat8
sudo vi ./bin/startup.sh
打开startup.sh,shutdown.sh文件后，添加jdk和jre:



JAVA_HOME=/usr/lib/jvm/jdk1.8.0
JRE_HOME=${JAVA_HOME}/jre
PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME
CLASSPATH=.:$JRE_HOME/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
TOMCAT_HOME=/opt/tomcat8


修改监听端口号
vi /opt/tomcat8/conf/server.xml

 <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
			   
8080改成8081



启动tomcat：
 sudo ./bin/startup.sh
 
 验证tomcat配置和安装是否成功：
在浏览器中输入：http://localhost:8081/
回车。
然后显示出tomcat版本的信息等。

关闭tomcat：
sudo ./bin/shutdown.sh


9、前台部署 （注意，目前里面的ip是写死的，如果要实际部署的时候，先装好系统后，获得ip，然后告诉我们ip，我把ip弄到程序包里面，做一下适配，否则无法访问页面）

将后台的相关文件上传

启动数据库接口程序
nohup java -jar so-0.0.1-SNAPSHOT.jar cn.com.mvtech.App &

ps -ef|grep so*  
有进程就表示启动成功了， 如果要停止，使用kill -9 pid进行杀掉

将SO.zip 解压（解压后的文件夹记得修改名称），复制到 tomcat de webapp目录下



10、启动tomcat

进入tomcat目录
运行
./startup.sh

11、访问态势感知页面

http://ip:8081/SO
